(this["webpackJsonpultimate-cellular-automaton"]=this["webpackJsonpultimate-cellular-automaton"]||[]).push([[0],{25:function(e,t,s){},26:function(e,t,s){},27:function(e,t,s){},29:function(e,t,s){},30:function(e,t,s){},31:function(e,t,s){},32:function(e,t,s){},33:function(e,t,s){},34:function(e,t,s){},35:function(e,t,s){},44:function(e,t,s){"use strict";s.r(t);var i=s(1),c=s.n(i),r=s(19),l=s.n(r),n=(s(25),s(15)),a=(s(26),s(3)),o=s(2),u=(s(27),s(0)),d=function(e){var t=e.i,s=e.j,c=Object(i.useContext)(D),r=Object(o.a)(c,2),l=r[0],n=r[1],a=Object(i.useState)(l.cells[t][s]),d=Object(o.a)(a,2),j=d[0],h=d[1],b=Object(i.useState)(l.cellSize),O=Object(o.a)(b,2),f=O[0],x=O[1],v=Object(i.useState)({backgroundColor:"white",height:"".concat(f,"px"),width:"".concat(f,"px")}),p=Object(o.a)(v,2),w=p[0],g=p[1];return Object(i.useEffect)((function(){g(j?{backgroundColor:"black",height:"".concat(f,"px"),width:"".concat(f,"px")}:{backgroundColor:"white",height:"".concat(f,"px"),width:"".concat(f,"px")})}),[j,f]),Object(i.useEffect)((function(){h(l.cells[t][s]),x(l.cellSize)}),[l]),Object(u.jsx)("div",{onClick:function(e){0===l.currentState&&n(j?{data:{i:t,j:s},type:"TOGGLE_OFF"}:{data:{i:t,j:s},type:"TOGGLE_ON"})},style:w,className:"cell-container"})},j=(s(29),function(e){var t=e.i,s=e.row;return Object(u.jsx)("div",{className:"cell-row-container",children:s.map((function(e,s){return Object(u.jsx)(d,{i:t,j:s},s)}))})}),h=(s(30),function(e){var t=e.state,s=e.callback;return Object(u.jsxs)("div",{className:"flipper-container",children:[Object(u.jsx)("div",{className:"flipper-left",onClick:function(e){return s(!0)},children:Object(u.jsx)("i",{class:"bi bi-chevron-left"})}),Object(u.jsx)("div",{className:"flipper-content",children:t}),Object(u.jsx)("div",{className:"flipper-right",onClick:function(e){return s(!1)},children:Object(u.jsx)("i",{class:"bi bi-chevron-right"})})]})}),b=s(10),O=s(11),f=s(16),x=function(e,t,s,i){var c=e.neighbors[s][i],r=!1;if(t.onlyCount){if(e.cells[s][i]===t.grid[4]){for(var l=0,n=0,a=0;a<9;a++)t.grid[a]&&(n+=1);n-=t.grid[4];var o,u=Object(f.a)(c);try{for(u.s();!(o=u.n()).done;){var d=o.value;e.cells[d.x][d.y]&&(l+=1)}}catch(O){u.e(O)}finally{u.f()}l-=e.cells[s][i],r=!1;for(var j=0;j<t.relationOperations.length;j++){if(">"===t.relationOperations[j]&&t.relations[j]&&l>n){r=!0;break}if("<"===t.relationOperations[j]&&t.relations[j]&&l<n){r=!0;break}if("="===t.relationOperations[j]&&t.relations[j]&&l===n){r=!0;break}}}}else{r=!0;for(var h=0;h<9;h++){var b=c[h];console.log(e.cells[b.x][b.y],t.grid[h]),e.cells[b.x][b.y]!==t.grid[h]&&(r=!1);break}}return r},v=function(e,t){for(var s=function(e,t){for(var s=new Array(e),i=0;i<e;i++)s[i]=new Array(t);return s}(e.rows,e.cols),i=0;i<e.rows;i++)for(var c=0;c<e.cols;c++){var r,l=Object(f.a)(t.rules);try{for(l.s();!(r=l.n()).done;){var n=r.value;if(n.valid){if(x(e,n,i,c)){s[i][c]=n.result;break}s[i][c]=0}}}catch(a){l.e(a)}finally{l.f()}}return s},p=function(){function e(t){if(Object(b.a)(this,e),t)this.rows=t.rows,this.cols=t.cols,this.maxRows=t.maxRows,this.maxCols=t.maxCols,this.minRows=t.minRows,this.minCols=t.minCols,this.cellSize=t.cellSize,this.cellSizeChange=t.cellSizeChange,this.prevMaxRows=t.prevMaxRows,this.prevMaxCols=t.prevMaxCols,this.cells=t.cells,this.currentState=t.currentState,this.neighbors=t.neighbors;else{this.cellSize=20,this.cellSizeChange=2;var s=this.calculateRowsCols();this.rows=s.rows,this.cols=s.cols,this.maxRows=s.rows,this.maxCols=s.cols,this.minRows=10,this.minCols=10,this.prevMaxRows=[this.minRows],this.prevMaxCols=[this.minCols],this.currentState=0,this.neighbors={},this.cells=N(this.rows,this.cols);for(var i=0;i<this.rows;i++){this.neighbors[i]={};for(var c=0;c<this.cols;c++){this.cells[i][c]=0,this.neighbors[i][c]=[];for(var r=-1;r<2;r++)for(var l=-1;l<2;l++){var n=(r+i+this.rows)%this.rows,a=(l+c+this.cols)%this.cols;this.neighbors[i][c].push({x:n,y:a})}}}}}return Object(O.a)(e,[{key:"calculateRowsCols",value:function(){return{rows:Math.floor((U(80)-4*this.cellSize)/this.cellSize),cols:Math.floor((H(80)-4*this.cellSize)/this.cellSize)}}},{key:"recalculate",value:function(e){var t=e.increase,s=e.rows,i=e.cols;console.log(this),t?(s>this.maxRows||i>this.maxCols)&&(this.prevMaxRows.push(this.maxRows),this.prevMaxCols.push(this.maxCols),this.cellSize-=this.cellSizeChange):(s<this.prevMaxRows[this.prevMaxRows.length-1]||i<this.prevMaxCols[this.prevMaxCols.length-1])&&(s>this.prevMaxRows[this.prevMaxRows.length-1]&&(s=this.prevMaxRows[this.prevMaxRows.length-1]),i>this.prevMaxCols[this.prevMaxCols.length-1]&&(i=this.prevMaxCols[this.prevMaxCols.length-1]),this.prevMaxRows.pop(),this.prevMaxCols.pop(),this.cellSize+=this.cellSizeChange);var c=this.calculateRowsCols();this.maxRows=c.rows,this.maxCols=c.cols,this.rows=s,this.cols=i,this.cells=N(this.rows,this.cols);for(var r=0;r<this.rows;r++){this.neighbors[r]={};for(var l=0;l<this.cols;l++){this.neighbors[r][l]=[];for(var n=-1;n<2;n++)for(var a=-1;a<2;a++){var o=(n+r+this.rows)%this.rows,u=(a+l+this.cols)%this.cols;this.neighbors[r][l].push({x:o,y:u})}}}g[C[this.currentState]](this)}},{key:"check",value:function(e,t){return e>=0&&e<this.rows&&t>=0&&t<this.cols}}]),e}(),w=function(){return new p(null)},g={WhiteSpace:function(e){for(var t=0;t<e.rows;t++)for(var s=0;s<e.cols;s++)e.cells[t][s]=0},BoxBorder:function(e){for(var t=0;t<e.rows;t++)for(var s=0;s<e.cols;s++)e.cells[t][s]=0;for(var i=0;i<e.cols;i++)e.cells[0][i]=1,e.cells[e.rows-1][i]=1;for(var c=1;c<e.rows-1;c++)e.cells[c][0]=1,e.cells[c][e.cols-1]=1},Random:function(e){for(var t=0;t<e.rows;t++)for(var s=0;s<e.cols;s++)e.cells[t][s]=0;for(var i=0;i<e.rows;i++)for(var c=0;c<e.cols;c++)Math.random()>.9?e.cells[i][c]=1:e.cells[i][c]=0}},C=[];for(var y in g)C.push(y);var m=function(e,t){if("CHANGE_DIM"===t.type)e.recalculate(t.data);else if("TOGGLE_ON"===t.type)e.cells[t.data.i][t.data.j]=1;else if("TOGGLE_OFF"===t.type)e.cells[t.data.i][t.data.j]=0;else if("CHANGE_STATE"===t.type){var s=0;t.data?(s=e.currentState-1)<0&&(s=C.length-1):(s=e.currentState+1)>=C.length&&(s=0),e.currentState=s,g[C[e.currentState]](e)}else if("CLEAR"===t.type)for(var i=0;i<e.rows;i++)for(var c=0;c<e.cols;c++)e.cells[i][c]=!1;else"SIMULATING"===t.type&&(e.cells=v(e,t.data.ruleList));return new p(e,0,0)},N=function(e,t){for(var s=new Array(e),i=0;i<e;i++)s[i]=new Array(t);return s},k=(s(31),function(){var e=Object(i.useContext)(D),t=Object(o.a)(e,2),s=t[0],c=t[1],r=Object(i.useContext)(F),l=Object(o.a)(r,1)[0],n=Object(i.useState)(null),a=Object(o.a)(n,2),d=a[0],b=a[1],O=function(){c({type:"SIMULATING",data:{ruleList:l}})},f=function(){d?(clearInterval(d),b(null)):b(setInterval(O,100))},x=function(e){return e?function(e){c(e?{type:"CHANGE_DIM",data:{increase:!1,rows:s.rows-1,cols:s.cols}}:{type:"CHANGE_DIM",data:{increase:!0,rows:s.rows+1,cols:s.cols}})}:function(e){console.log("Changing....C"),c(e?{type:"CHANGE_DIM",data:{increase:!1,rows:s.rows,cols:s.cols-1}}:{type:"CHANGE_DIM",data:{increase:!0,rows:s.rows,cols:s.cols+1}})}};return Object(u.jsxs)("div",{className:"world-container",children:[Object(u.jsx)("div",{className:"world-wrapper",children:Object(u.jsx)("div",{className:"world-grid",children:s.cells.map((function(e,t){return Object(u.jsx)(j,{i:t,row:e},t)}))})}),Object(u.jsxs)("div",{className:"world-controls",children:[Object(u.jsxs)("div",{className:"world-simlation-buttons",children:[!d&&Object(u.jsx)("div",{className:"world-btn world-play-pause",onClick:function(e){return f()},children:Object(u.jsx)("i",{class:"bi bi-play"})}),d&&Object(u.jsx)("div",{className:"world-btn world-play-pause",onClick:function(e){return f()},children:Object(u.jsx)("i",{class:"bi bi-pause"})}),Object(u.jsx)("div",{className:"world-btn world-step-it",onClick:function(e){return O()},children:Object(u.jsx)("i",{class:"bi bi-chevron-double-right"})})]}),Object(u.jsx)("div",{className:"world-state-buttons",children:Object(u.jsx)(h,{state:C[s.currentState],callback:function(e){c({type:"CHANGE_STATE",data:e})}})}),Object(u.jsxs)("div",{className:"world-grid-controls",children:[Object(u.jsx)(h,{state:s.rows,callback:x(!0)}),Object(u.jsx)(h,{state:s.cols,callback:x(!1)}),Object(u.jsx)("div",{className:"world-btn world-clear",onClick:function(e){c({type:"CLEAR",value:null})},children:Object(u.jsx)("i",{class:"bi bi-x-lg"})})]})]})]})}),R=s(46),S=function e(t){Object(b.a)(this,e),this.id=t,this.grid=[0,0,0,0,0,0,0,0,0],this.onlyCount=!1,this.valid=!0,this.result=0,this.relations=[0,0,0],this.relationOperations=[">","<","="]},E=function(){function e(t){Object(b.a)(this,e),this.rules=t?t.rules:[this.newDefaultRule()]}return Object(O.a)(e,[{key:"newDefaultRule",value:function(){return new S(this.generateId())}},{key:"generateId",value:function(){return Object(R.a)()}},{key:"getRuleById",value:function(e){for(var t=0;t<this.rules.length;t++)if(this.rules[t].id===e)return t;return-1}}]),e}(),G=function(){return new E(null)},M=function(e,t){if("TOGGLE_GRID"===t.type){var s=e.rules[e.getRuleById(t.data.id)];s.grid[t.data.index]?s.grid[t.data.index]=0:s.grid[t.data.index]=1}else if("TOGGLE_RESULT"===t.type){var i=e.rules[e.getRuleById(t.data.id)];i.result?i.result=0:i.result=1}else if("TOGGLE_VALID"===t.type)e.rules[e.getRuleById(t.data.id)].valid=!e.rules[e.getRuleById(t.data.id)].valid;else if("TOGGLE_ONLY_COUNT"===t.type)e.rules[e.getRuleById(t.data.id)].onlyCount=!e.rules[e.getRuleById(t.data.id)].onlyCount;else if("TOGGLE_RELATION"===t.type){var c=e.rules[e.getRuleById(t.data.id)];c.relations[t.data.index]?c.relations[t.data.index]=0:c.relations[t.data.index]=1,0===t.data.index?c.relations[1]=0:1===t.data.index&&(c.relations[0]=0)}else"REMOVE"===t.type?e.rules.splice(e.getRuleById(t.data.id),1):"NEW"===t.type&&e.rules.push(e.newDefaultRule());return new E(e)},I=(s(32),function(e){var t=e.index,s=Object(i.useContext)(z),c=Object(i.useContext)(F),r=Object(o.a)(c,2),l=r[0],n=r[1],a=Object(i.useState)(s.grid[t]),d=Object(o.a)(a,2),j=d[0],h=d[1],b=Object(i.useState)({backgroundColor:"white"}),O=Object(o.a)(b,2),f=O[0],x=O[1];return Object(i.useEffect)((function(){x(j?{backgroundColor:"black"}:{backgroundColor:"white"})}),[j]),Object(i.useEffect)((function(){h(s.grid[t])}),[l]),Object(u.jsx)("div",{onClick:function(e){n({type:"TOGGLE_GRID",data:{id:s.id,index:t}})},style:f,className:"grid-cell-container"})}),L=function(){var e=Object(i.useContext)(z);return Object(u.jsxs)("div",{className:"rule-grid-container",children:[Object(u.jsx)("div",{className:"rule-grid-row",children:e.grid.slice(0,3).map((function(e,t){return Object(u.jsx)(I,{index:0+t})}))}),Object(u.jsx)("div",{className:"rule-grid-row",children:e.grid.slice(3,6).map((function(e,t){return Object(u.jsx)(I,{index:3+t})}))}),Object(u.jsx)("div",{className:"rule-grid-row",children:e.grid.slice(6,9).map((function(e,t){return Object(u.jsx)(I,{index:6+t})}))})]})},T=(s(33),function(){var e=Object(i.useContext)(z),t=Object(i.useContext)(F),s=Object(o.a)(t,2),c=s[0],r=s[1],l=Object(i.useState)(e.result),n=Object(o.a)(l,2),a=n[0],d=n[1],j=Object(i.useState)({backgroundColor:"white"}),h=Object(o.a)(j,2),b=h[0],O=h[1];return Object(i.useEffect)((function(){O(a?{backgroundColor:"black"}:{backgroundColor:"white"})}),[a]),Object(i.useEffect)((function(){d(e.result)}),[c]),Object(u.jsx)("div",{onClick:function(t){r({type:"TOGGLE_RESULT",data:{id:e.id}})},style:b,className:"output-cell-container"})}),_=function(e){var t=e.index,s=e.operation,c=Object(i.useContext)(z),r=Object(i.useContext)(F),l=Object(o.a)(r,2),n=l[0],a=l[1],d=Object(i.useState)(c.relations[t]),j=Object(o.a)(d,2),h=j[0],b=j[1],O=Object(i.useState)({color:"black"}),f=Object(o.a)(O,2),x=f[0],v=f[1];return Object(i.useEffect)((function(){v(h?{color:"blue"}:{color:"black"})}),[h]),Object(i.useEffect)((function(){b(c.relations[t])}),[n]),Object(u.jsx)("div",{style:x,onClick:function(e){a({type:"TOGGLE_RELATION",data:{id:c.id,index:t}})},className:"rule-input",children:s})},A=function(){var e=Object(i.useContext)(z),t=Object(i.useContext)(F),s=Object(o.a)(t,2),c=s[0],r=s[1],l=Object(i.useState)({display:"none"}),n=Object(o.a)(l,2),a=n[0],d=n[1],j=Object(i.useState)({display:"none"}),h=Object(o.a)(j,2),b=h[0],O=h[1];return Object(i.useEffect)((function(){e.valid?d({display:"none"}):d({display:"block"}),e.onlyCount?O({display:"none"}):O({display:"block"})}),[c]),Object(u.jsxs)("div",{className:"rule-container",children:[Object(u.jsxs)("div",{className:"rule-title",children:[Object(u.jsxs)("div",{className:"rule-id",children:["#",e.id.substring(1,5)]}),Object(u.jsx)("div",{className:"rule-visibility",children:Object(u.jsx)("input",{onClick:function(){r({type:"TOGGLE_VALID",data:{id:e.id}})},type:"checkbox",checked:e.valid})}),Object(u.jsx)("div",{onClick:function(){r({type:"REMOVE",data:{id:e.id}})},className:"rule-delete",children:Object(u.jsx)("i",{class:"bi bi-x"})})]}),Object(u.jsxs)("div",{className:"rule-body",children:[Object(u.jsx)("div",{style:a,className:"rule-overlay"}),Object(u.jsxs)("div",{className:"rule-body-wrapper",children:[Object(u.jsxs)("div",{className:"rule-rule",children:[Object(u.jsx)("div",{className:"rule-grid",children:Object(u.jsx)(L,{})}),Object(u.jsx)("div",{className:"rule-spacer",children:Object(u.jsx)("i",{className:"bi bi-arrow-right"})}),Object(u.jsx)("div",{className:"rule-output",children:Object(u.jsx)(T,{})})]}),Object(u.jsxs)("div",{className:"rule-controls",children:[Object(u.jsx)("div",{className:"rule-only-count",children:Object(u.jsx)("input",{onClick:function(){r({type:"TOGGLE_ONLY_COUNT",data:{id:e.id}})},type:"checkbox",checked:e.onlyCount})}),Object(u.jsxs)("div",{className:"rule-relations",children:[Object(u.jsx)("div",{style:b,className:"rule-relations-overlay"}),Object(u.jsx)("div",{className:"rule-relations-wrapper",children:e.relationOperations.map((function(e,t){return Object(u.jsx)(_,{index:t,operation:e})}))})]})]})]})]})]})},z=(s(34),Object(i.createContext)()),B=function(){var e=Object(i.useContext)(F),t=Object(o.a)(e,2),s=t[0],c=t[1];return Object(u.jsxs)("div",{className:"rule-list-container",children:[Object(u.jsx)("div",{className:"rule-list-body",children:s.rules.map((function(e,t){return Object(u.jsx)(z.Provider,{value:e,children:Object(u.jsx)(A,{})})}))}),Object(u.jsx)("div",{className:"rule-list-controls",children:Object(u.jsx)("div",{onClick:function(){c({type:"NEW"})},className:"rule-list-add",children:Object(u.jsx)("i",{class:"bi bi-plus-square"})})})]})},D=(s(35),Object(i.createContext)()),F=Object(i.createContext)(),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:80,t=window.innerWidth/100;return t*e},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:80,t=window.innerHeight/100;return t*e},P=function(){return Object(u.jsx)(D.Provider,{value:Object(i.useReducer)(m,null,w),children:Object(u.jsx)(F.Provider,{value:Object(i.useReducer)(M,null,G),children:Object(u.jsx)("div",{className:"home-container",children:Object(u.jsxs)("div",{className:"home-wrapper",children:[Object(u.jsx)(k,{}),Object(u.jsx)(B,{})]})})})})},V=function(){return Object(u.jsx)("div",{className:"app",children:Object(u.jsx)(a.c,{children:Object(u.jsx)(a.a,{exact:!0,path:"/",children:Object(u.jsx)(P,{})})})})},W=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,47)).then((function(t){var s=t.getCLS,i=t.getFID,c=t.getFCP,r=t.getLCP,l=t.getTTFB;s(e),i(e),c(e),r(e),l(e)}))};l.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(n.a,{children:Object(u.jsx)(V,{})})}),document.getElementById("root")),W()}},[[44,1,2]]]);
//# sourceMappingURL=main.220433c2.chunk.js.map